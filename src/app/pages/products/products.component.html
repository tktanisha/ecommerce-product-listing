<div class="products-page">
  <div class="right-filters">
    <app-price-slider
      [minPrice]="minPrice"
      [maxPrice]="maxPrice"
      (priceRangeChange)="onPriceRangeChange($event)"
    >
    </app-price-slider>

    <app-category-filter
      [initialSelectedCategory]="selectedCategory"
      (categorySelected)="onCategoryChange($event)"
    >
    </app-category-filter>
  </div>

  <div class="products-section">
    <div *ngIf="loading" class="loading">
      <app-product-shimmer></app-product-shimmer>
    </div>

    <div class="product-header">
      <app-sorting-filter
        [initialSortOrder]="filters.order"
        (sortChange)="onSortChange($event)"
      >
      </app-sorting-filter>
    </div>

    <div
      *ngIf="!loading && !error && products?.length === 0"
      class="no-results"
    >
      <img
        class="no-results-image"
        src="https://media.geeksforgeeks.org/auth-dashboard-uploads/not_found.svg"
        alt="No Products Found"
      />
      <p class="no-results-text">No products found</p>
    </div>

    @if(!loading && !error && products.length > 0){
    <div class="products-grid">
      <app-product-card *ngFor="let product of products" [product]="product">
      </app-product-card>
    </div>

    <app-pagination
      [totalProducts]="totalProducts"
      [shownProducts]="products.length"
      (loadMore)="onLoadMoreProducts()"
    >
    </app-pagination>
    }
  </div>
</div>
